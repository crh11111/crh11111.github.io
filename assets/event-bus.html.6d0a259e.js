import{i as o,a as r,c as d,C as a,b as s,k as t,F as v,m as n,B as c}from"./app.5a4a9871.js";import{_}from"./plugin-vue_export-helper.21dcd24c.js";const f={},m={id:"\u9AD8\u4EFFvue2eventbusapi",tabindex:"-1"},h=s("a",{class:"header-anchor",href:"#\u9AD8\u4EFFvue2eventbusapi","aria-hidden":"true"},"#",-1),y=n(),B=n("\u9AD8\u4EFFvue2EventBusAPI"),w={id:"\u8D77\u56E0",tabindex:"-1"},g=s("a",{class:"header-anchor",href:"#\u8D77\u56E0","aria-hidden":"true"},"#",-1),b=n(),x=n("\u8D77\u56E0"),N=s("p",{style:{"text-indent":"1em","font-size":"18px"}}," EventBus(\u4E2D\u592E\u4E8B\u4EF6\u603B\u7EBF) \u5728Vue2\u4E2D\u53EF\u8C13\u662F\u6700\u597D\u7528\u7684\u975E\u7236\u5B50\u7EC4\u4EF6\u4E4B\u95F4\u7684\u901A\u8BAF\u624B\u6BB5,\u4F46\u5C31\u5728\u4E0D\u4E45\u524D,Vue3\u53D1\u5E03\u4E86\u3002 ",-1),S=s("p",{style:{"text-indent":"1em","font-size":"18px"}}," \u968F\u4E4B\u800C\u6765\u7684\u6709\u8BB8\u591A\u597D\u7528\u7684\u65B0\u7279\u6027\uFF0C\u4F46\u4E5F\u6709\u9057\u61BE\u2014\u2014\u2014\u2014Vue3\u5BA3\u5E03\u5DF2\u4E0D\u5728\u5185\u7F6E $on $emit API,\u5BF9\u4E8EEventBus\u7684\u53D6\u6D88\uFF0C\u5B98\u65B9\u63A8\u8350\u7684\u505A\u6CD5\u662F\u8BA9\u7528\u6237\u81EA\u5DF1\u5BFB\u627E\u4F7F\u7528\u7B2C\u4E09\u65B9\u5E93\uFF0C\u5BF9\u4E8E\u7528\u60EF\u4E86EventBus\u7684\u7528\u6237\u6765\u8BF4\uFF0C\u5C5E\u5B9E\u6709\u4E9B\u5C0F\u96BE\u53D7\u3002 ",-1),C={id:"\u6240\u4EE5-\u6211\u6765\u4E86",tabindex:"-1"},E=s("a",{class:"header-anchor",href:"#\u6240\u4EE5-\u6211\u6765\u4E86","aria-hidden":"true"},"#",-1),$=n(),j=n("\u6240\u4EE5\uFF0C\u6211\u6765\u4E86"),I=n(" \u5C0F\u8763\u8BF4\uFF1A "),V=n(" \u8F7B\u4FBF\u5C0F\u5DE7\u7684EventBus\u6765\u4E86\uFF0C\u4EE3\u7801\u5982\u4E0B \u2193 "),q={id:"javascript",tabindex:"-1"},A=s("a",{class:"header-anchor",href:"#javascript","aria-hidden":"true"},"#",-1),P=n(),z=n("Javascript"),F=c(`<div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">var</span> eventStack <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">$on</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>callBacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callBack<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callBack</span><span class="token punctuation">(</span>eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BE5\u63A5\u53E3\u672A\u6CE8\u518C,\u8BF7\u5148\u901A\u8FC7emit\u65B9\u6CD5\u6CE8\u518C\u63A5\u53E3,\u518D\u6765\u76D1\u542C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">$emit</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>callBacks<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>callBacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callBack</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      value<span class="token punctuation">,</span>
      <span class="token literal-property property">callBacks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> eventBus <span class="token operator">=</span> <span class="token punctuation">{</span>
  $emit<span class="token punctuation">,</span>
  $on<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useEventBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> eventBus<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>`,1),O={id:"typescript",tabindex:"-1"},T=s("a",{class:"header-anchor",href:"#typescript","aria-hidden":"true"},"#",-1),J=n(),D=n("Typescript"),G=c(`<div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">const</span> eventStack<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> $on <span class="token operator">=</span> <span class="token punctuation">(</span>eventName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function-variable function">callBack</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>callBacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callBack<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callBack</span><span class="token punctuation">(</span>eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BE5\u63A5\u53E3\u672A\u6CE8\u518C,\u8BF7\u5148\u901A\u8FC7emit\u65B9\u6CD5\u6CE8\u518C\u63A5\u53E3,\u518D\u6765\u76D1\u542C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">evnetBusItem_interface</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  callBacks<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> $emit <span class="token operator">=</span> <span class="token punctuation">(</span>eventName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>callBacks<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>callBacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>
      <span class="token function-variable function">callBack</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callBack</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> evnetBusItem<span class="token operator">:</span> evnetBusItem_interface <span class="token operator">=</span> <span class="token punctuation">{</span>
      value<span class="token punctuation">,</span>
      callBacks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    eventStack<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span> <span class="token operator">=</span> evnetBusItem<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">eventBus_interface</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">$emit</span><span class="token operator">:</span> <span class="token punctuation">(</span>eventName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">$on</span><span class="token operator">:</span> <span class="token punctuation">(</span>eventName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function-variable function">callBack</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> eventBus<span class="token operator">:</span> eventBus_interface <span class="token operator">=</span> <span class="token punctuation">{</span>
  $emit<span class="token punctuation">,</span>
  $on<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useEventBus <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> eventBus_interface <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> eventBus<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>`,1),H=n(" \u5C0F\u8763\u8BF4\uFF1A "),K=n(" \u4F7F\u7528\u65B9\u6CD5\u5982\u4E0B \u2193 "),L=c(`<div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEventBus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./eventBus&quot;</span><span class="token punctuation">;</span><span class="token comment">//\u5F15\u5165EventBus</span>
<span class="token keyword">const</span> Bus <span class="token operator">=</span> <span class="token function">useEventBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u521B\u5EFABus</span>

Bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;num&#39;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53D1\u5E03\u6570\u636E</span>

Bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&#39;num&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
<span class="token comment">//\u6B64\u5904\u76D1\u542C</span>
<span class="token comment">//do some thing</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div>`,1),M={id:"\u603B\u7ED3",tabindex:"-1"},Q=s("a",{class:"header-anchor",href:"#\u603B\u7ED3","aria-hidden":"true"},"#",-1),R=n(),U=n("\u603B\u7ED3"),W=n(" \u5C0F\u8763\u8BF4\uFF1A "),X=n(" \u53EF\u4EE5\u770B\u5230\uFF0CAPI\u7684\u4F7F\u7528\u4E0E\u4E4B\u524D\u4E00\u81F4,\u6B64\u65B9\u6CD5\u5E76\u4E0D\u4E0E\u67D0\u4E00\u4E2A\u6846\u67B6\u5F3A\u7ED1\u5B9A\uFF0C\u53EF\u4EE5\u81EA\u7531\u4F7F\u7528\u5728\u4EFB\u610F\u9879\u76EE\u73AF\u5883\u4E2D,\u5168\u6587\u7CFB\u535A\u4E3B\u539F\u521B\uFF0C\u8F6C\u8F7D\u8BF7\u6807\u660E\u51FA\u5904! ");function Y(Z,nn){const u=o("header-img"),p=o("my-title"),e=o("tips"),l=o("comment"),k=o("ClientOnly"),i=o("my-code");return r(),d(v,null,[a(u,{title:"\u9AD8\u4EFF vue2 EventBus API",date:"2022-01-21",src:"https://w.wallhaven.cc/full/rd/wallhaven-rdwjj7.jpg"}),s("h1",m,[h,y,a(p,{textColor_h:"rgb(51, 149, 159)",lineColor:"rgb(51, 149, 159)",display:"none"},{default:t(()=>[B]),_:1})]),s("h2",w,[g,b,a(p,{textColor_h:"#ff0062",lineColor:"#ff0062"},{default:t(()=>[x]),_:1})]),N,S,s("h2",C,[E,$,a(p,{textColor_h:"#ff0062",lineColor:"#ff0062"},{default:t(()=>[j]),_:1})]),a(e,{type:"info"},{title:t(()=>[I]),default:t(()=>[V]),_:1}),s("h2",q,[A,P,a(p,{textColor_h:"#00c3ff",lineColor:"#00c3ff"},{default:t(()=>[z]),_:1})]),F,s("h2",O,[T,J,a(p,{textColor_h:"#09ff00",lineColor:"#09ff00"},{default:t(()=>[D]),_:1})]),G,a(e,{type:"success"},{title:t(()=>[H]),default:t(()=>[K]),_:1}),L,s("h2",M,[Q,R,a(p,{textColor_h:"#09ff00",lineColor:"#09ff00"},{default:t(()=>[U]),_:1})]),a(e,{type:"warn"},{title:t(()=>[W]),default:t(()=>[X]),_:1}),a(k,null,{default:t(()=>[a(l)]),_:1}),a(i)],64)}var tn=_(f,[["render",Y]]);export{tn as default};
